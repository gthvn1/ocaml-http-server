<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Olox</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <h1 id="hdr">OLox REPL!</h1>

    <div class="container">
      <div class="left">
        <div class="section">
          <label for="blackboard">Blackboard</label>
          <textarea id="blackboard" name="blackboard">Type text here</textarea>
        </div>
        <div class="section">
          <label for="output">Output</label>
          <textarea readonly id="output" name="output">Results will appear here</textarea>
        </div>
      </div>
      <div class="right">
          <label for="debug">Debug</label>
          <textarea readonly id="debug" name="debug">Debug info</textarea>
      </div>
    </div>


    <script>
      var bboard = document.getElementById("blackboard");
      var output = document.getElementById("output");
      var debug = document.getElementById("debug");
      
      bboard.addEventListener("input", () => {
        fetch("/olox", {
          method: "POST",
          headers: {"Content-Type": "text/plain"},
          body: bboard.value })
        .then(response => response.json())
        .then(json => {
          output.value = json.response;
          debug.value = json.errors;
          console.log("Response:", json.response);
          console.log("Errors:", json.errors);
        })
        .catch(err => {
          debug.value = err;
          console.error("Error:", err)
        });
      })
    </script>

  </body>
</html>

